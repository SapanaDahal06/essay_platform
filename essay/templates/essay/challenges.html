{% extends 'essay/base.html' %}
{% load static %}

{% block title %}Writing Challenges - WriteVerse{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'essay/css/challenges.css' %}">
{% endblock %}

{% block content %}
<!-- Challenges Header -->
<section class="challenges-header">
    <div class="container">
        <div class="header-content">
            <h1 class="page-title">Writing Challenges</h1>
            <p class="page-subtitle">Push your limits with timed challenges, character constraints, and AI assistance</p>
        </div>
    </div>
</section>

<!-- Challenge Tabs Navigation -->
<section class="challenges-tabs-section">
    <div class="container">
        <div class="tabs-navigation">
            <button class="tab-btn active" data-tab="timed">
                <i class="fas fa-clock"></i>
                <span>Timed Challenges</span>
            </button>
            <button class="tab-btn" data-tab="character">
                <i class="fas fa-font"></i>
                <span>Character Limits</span>
            </button>
            <button class="tab-btn" data-tab="ai-assistant">
                <i class="fas fa-robot"></i>
                <span>AI Writing Assistant</span>
            </button>
        </div>
    </div>
</section>

<!-- Tab Content Container -->
<section class="challenges-content">
    <div class="container">
        
        <!-- ========== TIMED CHALLENGES TAB ========== -->
        <div class="tab-content active" id="timed-tab">
            <div class="tab-header">
                <h2 class="tab-title">‚è±Ô∏è Timed Writing Challenges</h2>
                <p class="tab-description">Race against the clock! Complete essays in 30 minutes, 1 hour, or 3 hours.</p>
            </div>

            <!-- Challenge Cards Grid -->
            <div class="challenges-grid">
                <!-- 30 Minute Challenge -->
                <div class="challenge-card" data-duration="30">
                    <div class="challenge-badge badge-sprint">Sprint</div>
                    <div class="challenge-icon">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <h3 class="challenge-title">30-Minute Sprint</h3>
                    <p class="challenge-description">
                        Quick thinking, fast writing. Perfect for practicing speed and focus under pressure.
                    </p>
                    <div class="challenge-stats">
                        <div class="stat-item">
                            <i class="fas fa-clock"></i>
                            <span>30 Minutes</span>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-users"></i>
                            <span>245 Writers</span>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-trophy"></i>
                            <span>‚Çπ500 Prize</span>
                        </div>
                    </div>
                    <div class="challenge-difficulty">
                        <span class="difficulty-label">Difficulty:</span>
                        <div class="difficulty-bars">
                            <span class="bar active"></span>
                            <span class="bar active"></span>
                            <span class="bar active"></span>
                            <span class="bar"></span>
                            <span class="bar"></span>
                        </div>
                    </div>
                    <button class="btn-challenge" onclick="startTimedChallenge(30)">
                        <i class="fas fa-play"></i>
                        <span>Start Challenge</span>
                    </button>
                </div>

                <!-- 1 Hour Challenge -->
                <div class="challenge-card featured" data-duration="60">
                    <div class="challenge-badge badge-popular">Most Popular</div>
                    <div class="challenge-icon">
                        <i class="fas fa-fire"></i>
                    </div>
                    <h3 class="challenge-title">1-Hour Challenge</h3>
                    <p class="challenge-description">
                        The sweet spot! Enough time to craft a quality essay while maintaining urgency.
                    </p>
                    <div class="challenge-stats">
                        <div class="stat-item">
                            <i class="fas fa-clock"></i>
                            <span>60 Minutes</span>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-users"></i>
                            <span>482 Writers</span>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-trophy"></i>
                            <span>‚Çπ1,000 Prize</span>
                        </div>
                    </div>
                    <div class="challenge-difficulty">
                        <span class="difficulty-label">Difficulty:</span>
                        <div class="difficulty-bars">
                            <span class="bar active"></span>
                            <span class="bar active"></span>
                            <span class="bar active"></span>
                            <span class="bar active"></span>
                            <span class="bar"></span>
                        </div>
                    </div>
                    <button class="btn-challenge" onclick="startTimedChallenge(60)">
                        <i class="fas fa-play"></i>
                        <span>Start Challenge</span>
                    </button>
                </div>

                <!-- 3 Hour Challenge -->
                <div class="challenge-card" data-duration="180">
                    <div class="challenge-badge badge-marathon">Marathon</div>
                    <div class="challenge-icon">
                        <i class="fas fa-crown"></i>
                    </div>
                    <h3 class="challenge-title">3-Hour Marathon</h3>
                    <p class="challenge-description">
                        Test your endurance! Extended time for in-depth research and polished writing.
                    </p>
                    <div class="challenge-stats">
                        <div class="stat-item">
                            <i class="fas fa-clock"></i>
                            <span>180 Minutes</span>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-users"></i>
                            <span>156 Writers</span>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-trophy"></i>
                            <span>‚Çπ2,000 Prize</span>
                        </div>
                    </div>
                    <div class="challenge-difficulty">
                        <span class="difficulty-label">Difficulty:</span>
                        <div class="difficulty-bars">
                            <span class="bar active"></span>
                            <span class="bar active"></span>
                            <span class="bar active"></span>
                            <span class="bar active"></span>
                            <span class="bar active"></span>
                        </div>
                    </div>
                    <button class="btn-challenge" onclick="startTimedChallenge(180)">
                        <i class="fas fa-play"></i>
                        <span>Start Challenge</span>
                    </button>
                </div>
            </div>

            <!-- Recent Completions -->
            <div class="recent-completions">
                <h3 class="section-subtitle">
                    <i class="fas fa-medal"></i>
                    Recent Completions
                </h3>
                <div class="completions-list">
                    <div class="completion-item">
                        <div class="user-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="completion-info">
                            <strong>Alex Rivera</strong> completed <span class="highlight">30-Minute Sprint</span>
                        </div>
                        <div class="completion-time">2 min ago</div>
                    </div>
                    <div class="completion-item">
                        <div class="user-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="completion-info">
                            <strong>Sarah Chen</strong> completed <span class="highlight">1-Hour Challenge</span>
                        </div>
                        <div class="completion-time">15 min ago</div>
                    </div>
                    <div class="completion-item">
                        <div class="user-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="completion-info">
                            <strong>Maya Patel</strong> completed <span class="highlight">3-Hour Marathon</span>
                        </div>
                        <div class="completion-time">1 hour ago</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ========== CHARACTER LIMIT CHALLENGES TAB ========== -->
        <div class="tab-content" id="character-tab">
            <div class="tab-header">
                <h2 class="tab-title">üî§ Character Limit Challenges</h2>
                <p class="tab-description">Master the art of brevity! Express your ideas within strict character limits.</p>
            </div>

            <!-- Character Challenges Grid -->
            <div class="challenges-grid">
                <!-- 100 Character Challenge -->
                <div class="challenge-card" data-limit="100">
                    <div class="challenge-badge badge-micro">Micro</div>
                    <div class="challenge-icon">
                        <i class="fas fa-compress"></i>
                    </div>
                    <h3 class="challenge-title">100 Characters</h3>
                    <p class="challenge-description">
                        Ultra-concise writing. Every single character counts. Think Twitter, but harder.
                    </p>
                    <div class="challenge-stats">
                        <div class="stat-item">
                            <i class="fas fa-text-width"></i>
                            <span>100 Chars Max</span>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-users"></i>
                            <span>312 Writers</span>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-trophy"></i>
                            <span>‚Çπ300 Prize</span>
                        </div>
                    </div>
                    <div class="example-text">
                        <strong>Example:</strong> "Climate change isn't future‚Äîit's now. Act today, or lose tomorrow's world."
                    </div>
                    <button class="btn-challenge" onclick="startCharacterChallenge(100)">
                        <i class="fas fa-pen"></i>
                        <span>Start Writing</span>
                    </button>
                </div>

                <!-- 500 Character Challenge -->
                <div class="challenge-card featured" data-limit="500">
                    <div class="challenge-badge badge-popular">Popular</div>
                    <div class="challenge-icon">
                        <i class="fas fa-align-left"></i>
                    </div>
                    <h3 class="challenge-title">500 Characters</h3>
                    <p class="challenge-description">
                        Perfect balance of brevity and depth. Enough space to make your point clearly.
                    </p>
                    <div class="challenge-stats">
                        <div class="stat-item">
                            <i class="fas fa-text-width"></i>
                            <span>500 Chars Max</span>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-users"></i>
                            <span>567 Writers</span>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-trophy"></i>
                            <span>‚Çπ750 Prize</span>
                        </div>
                    </div>
                    <div class="example-text">
                        <strong>Example length:</strong> About 3-4 sentences of well-crafted prose.
                    </div>
                    <button class="btn-challenge" onclick="startCharacterChallenge(500)">
                        <i class="fas fa-pen"></i>
                        <span>Start Writing</span>
                    </button>
                </div>

                <!-- 1000 Character Challenge -->
                <div class="challenge-card" data-limit="1000">
                    <div class="challenge-badge badge-extended">Extended</div>
                    <div class="challenge-icon">
                        <i class="fas fa-paragraph"></i>
                    </div>
                    <h3 class="challenge-title">1000 Characters</h3>
                    <p class="challenge-description">
                        More room to develop ideas. Challenge yourself to use every character wisely.
                    </p>
                    <div class="challenge-stats">
                        <div class="stat-item">
                            <i class="fas fa-text-width"></i>
                            <span>1000 Chars Max</span>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-users"></i>
                            <span>423 Writers</span>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-trophy"></i>
                            <span>‚Çπ1,200 Prize</span>
                        </div>
                    </div>
                    <div class="example-text">
                        <strong>Example length:</strong> Approximately 150-200 words or one solid paragraph.
                    </div>
                    <button class="btn-challenge" onclick="startCharacterChallenge(1000)">
                        <i class="fas fa-pen"></i>
                        <span>Start Writing</span>
                    </button>
                </div>
            </div>

            <!-- Tips Section -->
            <div class="tips-section">
                <h3 class="section-subtitle">
                    <i class="fas fa-lightbulb"></i>
                    Tips for Character-Limited Writing
                </h3>
                <div class="tips-grid">
                    <div class="tip-card">
                        <i class="fas fa-cut"></i>
                        <h4>Cut Ruthlessly</h4>
                        <p>Remove every unnecessary word. Make each one count.</p>
                    </div>
                    <div class="tip-card">
                        <i class="fas fa-bullseye"></i>
                        <h4>Focus Sharp</h4>
                        <p>One main idea. No digressions. Stay on target.</p>
                    </div>
                    <div class="tip-card">
                        <i class="fas fa-feather"></i>
                        <h4>Choose Wisely</h4>
                        <p>Pick powerful words over lengthy explanations.</p>
                    </div>
                    <div class="tip-card">
                        <i class="fas fa-sync"></i>
                        <h4>Revise Multiple Times</h4>
                        <p>First draft is never final. Polish until perfect.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ========== AI WRITING ASSISTANT TAB ========== -->
        <div class="tab-content" id="ai-assistant-tab">
            <div class="tab-header">
                <h2 class="tab-title">ü§ñ AI Writing Assistant</h2>
                <p class="tab-description">Get intelligent suggestions, improvements, and creative ideas powered by AI.</p>
            </div>

            <!-- AI Assistant Interface -->
            <div class="ai-assistant-container">
                <!-- Left Panel - Writing Area -->
                <div class="ai-writing-panel">
                    <div class="panel-header">
                        <h3>Your Essay</h3>
                        <div class="word-count">
                            <span id="word-count">0</span> words | <span id="char-count">0</span> characters
                        </div>
                    </div>
                    <textarea 
                        id="ai-essay-textarea" 
                        class="ai-textarea" 
                        placeholder="Start writing your essay here... The AI assistant will help you improve it in real-time!"
                    ></textarea>
                    <div class="writing-controls">
                        <button class="control-btn" onclick="clearText()">
                            <i class="fas fa-trash"></i>
                            Clear
                        </button>
                        <button class="control-btn" onclick="copyText()">
                            <i class="fas fa-copy"></i>
                            Copy
                        </button>
                        <button class="control-btn primary" onclick="analyzeEssay()">
                            <i class="fas fa-magic"></i>
                            Analyze with AI
                        </button>
                    </div>
                </div>

                <!-- Right Panel - AI Suggestions -->
                <div class="ai-suggestions-panel">
                    <div class="panel-header">
                        <h3>AI Suggestions</h3>
                        <span class="ai-badge">Powered by AI</span>
                    </div>

                    <!-- AI Features Tabs -->
                    <div class="ai-features-tabs">
                        <button class="ai-tab-btn active" data-feature="improve">
                            <i class="fas fa-wand-magic-sparkles"></i>
                            Improve
                        </button>
                        <button class="ai-tab-btn" data-feature="grammar">
                            <i class="fas fa-spell-check"></i>
                            Grammar
                        </button>
                        <button class="ai-tab-btn" data-feature="ideas">
                            <i class="fas fa-lightbulb"></i>
                            Ideas
                        </button>
                        <button class="ai-tab-btn" data-feature="tone">
                            <i class="fas fa-microphone"></i>
                            Tone
                        </button>
                    </div>

                    <!-- Suggestions Content -->
                    <div class="suggestions-content" id="suggestions-content">
                        <div class="empty-state">
                            <i class="fas fa-robot"></i>
                            <h4>Start Writing to Get Suggestions</h4>
                            <p>Type in the text area and click "Analyze with AI" to receive intelligent suggestions.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- AI Features Overview -->
            <div class="ai-features-overview">
                <h3 class="section-subtitle">
                    <i class="fas fa-sparkles"></i>
                    AI-Powered Features
                </h3>
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-wand-magic-sparkles"></i>
                        </div>
                        <h4>Smart Improvements</h4>
                        <p>Get suggestions to enhance clarity, flow, and impact of your writing.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-spell-check"></i>
                        </div>
                        <h4>Grammar Checker</h4>
                        <p>Detect and fix grammar, spelling, and punctuation errors instantly.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-lightbulb"></i>
                        </div>
                        <h4>Idea Generator</h4>
                        <p>Stuck? Get creative prompts and argument suggestions for your topic.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-microphone"></i>
                        </div>
                        <h4>Tone Analyzer</h4>
                        <p>Ensure your writing matches the intended tone - formal, casual, persuasive.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-expand"></i>
                        </div>
                        <h4>Expand Text</h4>
                        <p>Need more words? AI helps you elaborate on ideas naturally.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-compress"></i>
                        </div>
                        <h4>Condense Text</h4>
                        <p>Make it concise. AI identifies redundancies and suggests cuts.</p>
                    </div>
                </div>
            </div>

            <!-- Usage Stats -->
            <div class="usage-stats">
                <h3 class="section-subtitle">
                    <i class="fas fa-chart-line"></i>
                    Your AI Usage
                </h3>
                <div class="stats-grid">
                    <div class="stat-box">
                        <div class="stat-value">47</div>
                        <div class="stat-label">Essays Analyzed</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value">312</div>
                        <div class="stat-label">Improvements Applied</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value">4.8</div>
                        <div class="stat-label">Avg Quality Score</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value">15h</div>
                        <div class="stat-label">Time Saved</div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</section>

<!-- Challenge Modal -->
<div class="challenge-modal" id="challenge-modal">
    <div class="modal-overlay" onclick="closeModal()"></div>
    <div class="modal-content">
        <button class="modal-close" onclick="closeModal()">
            <i class="fas fa-times"></i>
        </button>
        
        <!-- Timer Display -->
        <div class="timer-section">
            <h2 class="modal-title" id="modal-title">Challenge Starting...</h2>
            <div class="timer-display" id="timer-display">
                <div class="timer-circle">
                    <svg class="timer-svg" width="200" height="200">
                        <circle cx="100" cy="100" r="90" class="timer-circle-bg"></circle>
                        <circle cx="100" cy="100" r="90" class="timer-circle-progress" id="timer-progress"></circle>
                    </svg>
                    <div class="timer-text" id="timer-text">00:00</div>
                </div>
            </div>
        </div>

        <!-- Writing Area -->
        <div class="modal-writing-area">
            <div class="writing-header">
                <h3 id="challenge-prompt">Write about: The Impact of Technology on Modern Society</h3>
                <div class="challenge-stats-mini">
                    <span id="modal-word-count">0 words</span>
                    <span id="modal-char-count">0 characters</span>
                </div>
            </div>
            <textarea 
                id="challenge-textarea" 
                class="challenge-textarea" 
                placeholder="Start writing your essay here..."
            ></textarea>
        </div>

        <!-- Modal Actions -->
        <div class="modal-actions">
            <button class="btn-modal-secondary" onclick="pauseChallenge()">
                <i class="fas fa-pause"></i>
                Pause
            </button>
            <button class="btn-modal-primary" onclick="submitChallenge()">
                <i class="fas fa-check"></i>
                Submit Essay
            </button>
        </div>
    </div>
</div>

{% endblock %}

{% block extra_js %}
<script src="{% static 'essay/js/challenges.js' %}"></script>
{% endblock %}