{% extends 'essay/base.html' %}
{% load static %}

{% block title %}Home - WriteVerse{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'essay/css/home.css' %}">
{% endblock %}

{% block content %}
    <!-- Hero Section -->
    <section class="hero-section">
        <div class="hero-container">
            <div class="hero-content">
                <h1 class="hero-title">Where Writers <span class="text-gradient">Grow, Compete & Succeed</span></h1>
                <p class="hero-subtitle">Participate in essay competitions, receive expert feedback, and win exciting prizes. Join thousands of writers who have improved their skills with WriteVerse.</p>
                
                <div class="hero-buttons">
                    <a href="#" class="btn btn-primary">
                        <i class="fas fa-trophy"></i>
                        View Competitions
                    </a>
                    {% if not user.is_authenticated %}
                    <a href="{% url 'register' %}" class="btn btn-secondary">
                        <i class="fas fa-user-plus"></i>
                        Join Free
                    </a>
                    {% else %}
                    <a href="{% url 'create_essay' %}" class="btn btn-secondary">
                        <i class="fas fa-pen"></i>
                        Create Essay
                    </a>
                    <a href="{% url 'my_essays' %}" class="btn btn-outline">
                        <i class="fas fa-book"></i>
                        My Essays
                    </a>
                    {% endif %}
                </div>

                <div class="hero-stats">
                    <div class="stat">
                        <span class="stat-number">1,000+</span>
                        <span class="stat-label">Writers Joined</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number">₹50,000+</span>
                        <span class="stat-label">Prize Money</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number">500+</span>
                        <span class="stat-label">Essays Submitted</span>
                    </div>
                </div>
            </div>

            <div class="hero-image">
                <div class="hero-image-container">
                    <i class="fas fa-lightbulb hero-icon"></i>
                    <div class="hero-image-text">
                        <span>Share Your</span>
                        <span class="text-bold">Ideas</span>
                        <span>With The World</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- How It Works -->
    <section class="how-it-works">
        <div class="container">
            <h2 class="section-title">How It Works</h2>
            <p class="section-subtitle">Three simple steps to start your writing journey</p>
            
            <div class="steps-grid">
                <div class="step-card">
                    <div class="step-number">01</div>
                    <div class="step-icon">
                        <i class="fas fa-search"></i>
                    </div>
                    <h3 class="step-title">Browse Competitions</h3>
                    <p class="step-description">Explore various essay competitions with different themes, prizes, and deadlines.</p>
                </div>
                
                <div class="step-card">
                    <div class="step-number">02</div>
                    <div class="step-icon">
                        <i class="fas fa-pen-fancy"></i>
                    </div>
                    <h3 class="step-title">Write & Submit</h3>
                    <p class="step-description">Write your essay following competition guidelines and submit before the deadline.</p>
                </div>
                
                <div class="step-card">
                    <div class="step-number">03</div>
                    <div class="step-icon">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <h3 class="step-title">Get Feedback & Win</h3>
                    <p class="step-description">Receive expert feedback and compete for prizes and recognition.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Featured Competitions -->
    <section class="competitions-section">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Featured Competitions</h2>
                <p class="section-subtitle">Join these exciting writing challenges</p>
                <a href="#" class="view-all-link">
                    View All <i class="fas fa-arrow-right"></i>
                </a>
            </div>
            
            <div class="competitions-grid">
                <div class="competition-card">
                    <div class="competition-badge">Featured</div>
                    <div class="competition-header">
                        <h3 class="competition-title">Climate Change Solutions</h3>
                        <p class="competition-topic">Environment & Sustainability</p>
                    </div>
                    <div class="competition-body">
                        <p class="competition-description">Write an essay on innovative solutions for climate change and environmental sustainability.</p>
                        <div class="competition-details">
                            <div class="detail">
                                <i class="fas fa-trophy"></i>
                                <span>Prize: ₹7,500</span>
                            </div>
                            <div class="detail">
                                <i class="fas fa-clock"></i>
                                <span>Deadline: Dec 15, 2024</span>
                            </div>
                            <div class="detail">
                                <i class="fas fa-users"></i>
                                <span>75 Participants</span>
                            </div>
                        </div>
                    </div>
                    <div class="competition-footer">
                        <a href="#" class="btn btn-outline">View Details</a>
                        <a href="#" class="btn btn-primary">Enter Now</a>
                    </div>
                </div>
                
                <div class="competition-card">
                    <div class="competition-badge">Popular</div>
                    <div class="competition-header">
                        <h3 class="competition-title">AI Ethics & Future</h3>
                        <p class="competition-topic">Technology & Ethics</p>
                    </div>
                    <div class="competition-body">
                        <p class="competition-description">Discuss ethical considerations in artificial intelligence development and its future impact.</p>
                        <div class="competition-details">
                            <div class="detail">
                                <i class="fas fa-trophy"></i>
                                <span>Prize: ₹10,000</span>
                            </div>
                            <div class="detail">
                                <i class="fas fa-clock"></i>
                                <span>Deadline: Jan 20, 2025</span>
                            </div>
                            <div class="detail">
                                <i class="fas fa-users"></i>
                                <span>125 Participants</span>
                            </div>
                        </div>
                    </div>
                    <div class="competition-footer">
                        <a href="#" class="btn btn-outline">View Details</a>
                        <a href="#" class="btn btn-primary">Enter Now</a>
                    </div>
                </div>
                
                <div class="competition-card">
                    <div class="competition-badge">Closing Soon</div>
                    <div class="competition-header">
                        <h3 class="competition-title">Future of Education</h3>
                        <p class="competition-topic">Education & Technology</p>
                    </div>
                    <div class="competition-body">
                        <p class="competition-description">How will technology transform education in the next decade? Share your vision.</p>
                        <div class="competition-details">
                            <div class="detail">
                                <i class="fas fa-trophy"></i>
                                <span>Prize: ₹5,000</span>
                            </div>
                            <div class="detail">
                                <i class="fas fa-clock"></i>
                                <span>Deadline: Dec 10, 2024</span>
                            </div>
                            <div class="detail">
                                <i class="fas fa-users"></i>
                                <span>100 Participants</span>
                            </div>
                        </div>
                    </div>
                    <div class="competition-footer">
                        <a href="#" class="btn btn-outline">View Details</a>
                        <a href="#" class="btn btn-primary">Enter Now</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Benefits Section -->
    <section class="benefits-section">
        <div class="container">
            <h2 class="section-title">Why Choose WriteVerse?</h2>
            <p class="section-subtitle">We provide everything you need to excel in writing</p>
            
            <div class="benefits-grid">
                <div class="benefit-card">
                    <div class="benefit-icon">
                        <i class="fas fa-award"></i>
                    </div>
                    <h3 class="benefit-title">Recognition & Prizes</h3>
                    <p class="benefit-description">Win cash prizes, certificates, and get your work featured in our winners' gallery.</p>
                </div>
                
                <div class="benefit-card">
                    <div class="benefit-icon">
                        <i class="fas fa-comments"></i>
                    </div>
                    <h3 class="benefit-title">Expert Feedback</h3>
                    <p class="benefit-description">Receive detailed feedback from experienced writers, editors, and educators.</p>
                </div>
                
                <div class="benefit-card">
                    <div class="benefit-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <h3 class="benefit-title">Skill Development</h3>
                    <p class="benefit-description">Improve your writing skills through regular practice and constructive criticism.</p>
                </div>
                
                <div class="benefit-card">
                    <div class="benefit-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <h3 class="benefit-title">Community Support</h3>
                    <p class="benefit-description">Connect with fellow writers, share ideas, and grow together in our community.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="cta-section">
        <div class="container">
            <div class="cta-content">
                <h2 class="cta-title">Ready to Start Your Writing Journey?</h2>
                <p class="cta-subtitle">Join thousands of writers who are already improving their skills and winning prizes.</p>
                <div class="cta-buttons">
                    {% if not user.is_authenticated %}
                    <a href="{% url 'register' %}" class="btn btn-primary btn-large">
                        <i class="fas fa-user-plus"></i>
                        Join WriteVerse - It's Free!
                    </a>
                    {% else %}
                    <a href="#" class="btn btn-primary btn-large">
                        <i class="fas fa-pen"></i>
                        Browse Competitions
                    </a>
                    {% endif %}
                    <a href="#" class="btn btn-outline btn-large">
                        <i class="fas fa-play-circle"></i>
                        How It Works
                    </a>
                </div>
            </div>
        </div>
    </section>
{% endblock %}

{% block extra_js %}
<script>
// Wait for DOM to load
document.addEventListener('DOMContentLoaded', function() {
    console.log('WriteVerse Home Page Loaded');
    
    // 1. Animated Counter for Stats
    function animateCounter(element, target, duration = 2000) {
        let start = 0;
        const increment = target / (duration / 16);
        const timer = setInterval(() => {
            start += increment;
            if (start >= target) {
                element.textContent = target + '+';
                clearInterval(timer);
            } else {
                element.textContent = Math.floor(start) + '+';
            }
        }, 16);
    }
    
    // Start counter animation when stats are visible
    const statNumbers = document.querySelectorAll('.stat-number');
    if (statNumbers.length > 0) {
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const targetText = entry.target.textContent;
                    const targetNumber = parseInt(targetText);
                    animateCounter(entry.target, targetNumber);
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.5 });
        
        statNumbers.forEach(number => {
            observer.observe(number);
        });
    }
    
    // 2. Add fade-in animation to cards when they come into view
    const animatedElements = document.querySelectorAll('.step-card, .competition-card, .benefit-card');
    
    const fadeObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
                fadeObserver.unobserve(entry.target);
            }
        });
    }, { threshold: 0.1 });
    
    // Set initial state for animation
    animatedElements.forEach(el => {
        el.style.opacity = '0';
        el.style.transform = 'translateY(20px)';
        el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        fadeObserver.observe(el);
    });
    
    // 3. Enhanced hover effects for competition cards
    const competitionCards = document.querySelectorAll('.competition-card');
    competitionCards.forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-10px) scale(1.02)';
            this.style.boxShadow = '0 20px 40px rgba(0, 0, 0, 0.15)';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0) scale(1)';
            this.style.boxShadow = '';
        });
    });
    
    // 4. Parallax effect for hero section
    const heroSection = document.querySelector('.hero-section');
    if (heroSection) {
        window.addEventListener('scroll', function() {
            const scrolled = window.pageYOffset;
            const rate = scrolled * -0.5;
            heroSection.style.backgroundPosition = 'center ' + (rate + 50) + 'px';
        });
    }
    
    // 5. Floating animation for hero lightbulb
    const heroIcon = document.querySelector('.hero-icon');
    if (heroIcon) {
        let floatDirection = 1;
        let floatPosition = 0;
        
        function floatAnimation() {
            floatPosition += floatDirection * 0.5;
            if (floatPosition > 10) floatDirection = -1;
            if (floatPosition < -10) floatDirection = 1;
            
            heroIcon.style.transform = `translateY(${floatPosition}px)`;
            requestAnimationFrame(floatAnimation);
        }
        
        // Start animation
        floatAnimation();
    }
    
    // 6. Button click animations
    const buttons = document.querySelectorAll('.btn');
    buttons.forEach(button => {
        button.addEventListener('click', function(e) {
            // Create ripple effect
            const ripple = document.createElement('span');
            const rect = this.getBoundingClientRect();
            const size = Math.max(rect.width, rect.height);
            const x = e.clientX - rect.left - size / 2;
            const y = e.clientY - rect.top - size / 2;
            
            ripple.style.cssText = `
                position: absolute;
                border-radius: 50%;
                background: rgba(255, 255, 255, 0.7);
                transform: scale(0);
                animation: ripple 0.6s linear;
                width: ${size}px;
                height: ${size}px;
                top: ${y}px;
                left: ${x}px;
                pointer-events: none;
            `;
            
            this.style.position = 'relative';
            this.style.overflow = 'hidden';
            this.appendChild(ripple);
            
            // Remove ripple after animation
            setTimeout(() => {
                ripple.remove();
            }, 600);
        });
    });
    
    // Add ripple animation to CSS
    const style = document.createElement('style');
    style.textContent = `
        @keyframes ripple {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }
    `;
    document.head.appendChild(style);
    
    // 7. Update active nav link
    function updateActiveNavLink() {
        const currentPath = window.location.pathname;
        const navLinks = document.querySelectorAll('.navbar-nav .nav-link');
        
        navLinks.forEach(link => {
            const linkPath = link.getAttribute('href');
            if (linkPath === currentPath || 
                (currentPath === '/' && linkPath === '/home/') ||
                (linkPath !== '/' && currentPath.startsWith(linkPath))) {
                link.classList.add('active');
                link.setAttribute('aria-current', 'page');
            } else {
                link.classList.remove('active');
                link.removeAttribute('aria-current');
            }
        });
    }
    
    // Call on load and when URL changes
    updateActiveNavLink();
    window.addEventListener('popstate', updateActiveNavLink);
    
    // 8. Smooth scroll for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function(e) {
            e.preventDefault();
            const targetId = this.getAttribute('href');
            if (targetId === '#') return;
            
            const targetElement = document.querySelector(targetId);
            if (targetElement) {
                window.scrollTo({
                    top: targetElement.offsetTop - 80,
                    behavior: 'smooth'
                });
            }
        });
    });
    
    // 9. Newsletter form handling
    const newsletterForm = document.querySelector('.cta-section form');
    if (newsletterForm) {
        newsletterForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const emailInput = this.querySelector('input[type="email"]');
            const email = emailInput.value.trim();
            
            if (email && validateEmail(email)) {
                // Simulate submission
                emailInput.value = '';
                showNotification('Thank you for subscribing!', 'success');
            } else {
                showNotification('Please enter a valid email address', 'error');
            }
        });
    }
    
    function validateEmail(email) {
        const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return re.test(email);
    }
    
    function showNotification(message, type) {
        const notification = document.createElement('div');
        notification.className = `notification notification-${type}`;
        notification.textContent = message;
        notification.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 8px;
            color: white;
            background: ${type === 'success' ? '#28a745' : '#dc3545'};
            z-index: 1000;
            animation: slideIn 0.3s ease;
        `;
        
        document.body.appendChild(notification);
        
        setTimeout(() => {
            notification.style.animation = 'slideOut 0.3s ease';
            setTimeout(() => notification.remove(), 300);
        }, 3000);
    }
    
    // Add notification animations to CSS
    const notificationStyle = document.createElement('style');
    notificationStyle.textContent = `
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
    `;
    document.head.appendChild(notificationStyle);
    
    // 10. Initialize tooltips for icons
    const tooltipElements = document.querySelectorAll('[data-tooltip]');
    tooltipElements.forEach(el => {
        el.addEventListener('mouseenter', function() {
            const tooltip = document.createElement('div');
            tooltip.className = 'tooltip';
            tooltip.textContent = this.getAttribute('data-tooltip');
            tooltip.style.cssText = `
                position: absolute;
                background: #333;
                color: white;
                padding: 5px 10px;
                border-radius: 4px;
                font-size: 12px;
                white-space: nowrap;
                z-index: 100;
                transform: translateY(-100%) translateX(-50%);
                left: 50%;
                margin-top: -10px;
            `;
            
            this.style.position = 'relative';
            this.appendChild(tooltip);
        });
        
        el.addEventListener('mouseleave', function() {
            const tooltip = this.querySelector('.tooltip');
            if (tooltip) tooltip.remove();
        });
    });
    
    console.log('All home page scripts loaded successfully!');
});
</script>
{% endblock %}